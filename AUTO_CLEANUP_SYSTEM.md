# ğŸ§¹ Auto-Cleanup System

Ø³ÛŒØ³ØªÙ… **Ù¾Ø§Ú©Ø³Ø§Ø²ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±** Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù automatic Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ØºÛŒØ±ÙØ¹Ø§Ù„ Ùˆ block Ø´Ø¯Ù‡.

## ğŸ”§ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§

### âœ… **ØªØ´Ø®ÛŒØµ Ø®ÙˆØ¯Ú©Ø§Ø± Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Block Ø´Ø¯Ù‡**
- Ø±Ø¨Ø§Øª ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ Ø¨Ø§ `getChat()` Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ø¯Ø³ØªØ±Ø³ÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ø¯
- Ø§Ú¯Ø± Ø®Ø·Ø§ÛŒ "blocked", "deactivated" ÛŒØ§ "not found" Ø¯Ø±ÛŒØ§ÙØª Ø´ÙˆØ¯ØŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† block Ø´Ø¯Ù‡ Ø´Ù†Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- ÙØ§ÛŒÙ„ database Ø¢Ù† Ú©Ø§Ø±Ø¨Ø± Ø®ÙˆØ¯Ú©Ø§Ø± Ø­Ø°Ù Ù…ÛŒâ€ŒØ´ÙˆØ¯

### â° **ØªØ´Ø®ÛŒØµ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ØºÛŒØ±ÙØ¹Ø§Ù„**
- Ú©Ø§Ø±Ø¨Ø±Ø§Ù†ÛŒ Ú©Ù‡ Ø¨ÛŒØ´ Ø§Ø² **30 Ø±ÙˆØ²** ÙØ¹Ø§Ù„ÛŒØª Ù†Ø¯Ø§Ø´ØªÙ‡â€ŒØ§Ù†Ø¯
- Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¢Ø®Ø±ÛŒÙ† ØªØºÛŒÛŒØ± ÙØ§ÛŒÙ„ database (`lastModified`)
- Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… Ø§Ø² Ø·Ø±ÛŒÙ‚ `INACTIVE_DAYS_THRESHOLD`

### ğŸ• **Ø§Ø¬Ø±Ø§ÛŒ Ø¯ÙˆØ±Ù‡â€ŒØ§ÛŒ**
- Ù‡Ø± **24 Ø³Ø§Ø¹Øª** ÛŒÚ©Ø¨Ø§Ø± Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯
- Ø¯Ø± Ø´Ø±ÙˆØ¹ Ø±Ø¨Ø§Øª Ù†ÛŒØ² ÛŒÚ©Ø¨Ø§Ø± Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯ (Ø¨Ø§ ØªØ£Ø®ÛŒØ± 5 Ø«Ø§Ù†ÛŒÙ‡)
- Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… Ø§Ø² Ø·Ø±ÛŒÙ‚ `CLEANUP_INTERVAL_HOURS`

## âš™ï¸ **ØªÙ†Ø¸ÛŒÙ…Ø§Øª**

```javascript
const INACTIVE_DAYS_THRESHOLD = 30; // Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ØºÛŒØ±ÙØ¹Ø§Ù„ Ø¨Ø§Ù„Ø§ÛŒ 30 Ø±ÙˆØ²
const CLEANUP_INTERVAL_HOURS = 24;  // Ø§Ø¬Ø±Ø§ Ù‡Ø± 24 Ø³Ø§Ø¹Øª
```

## ğŸ¯ **Ù†Ø­ÙˆÙ‡ Ú©Ø§Ø±**

### 1. **ØªØ´Ø®ÛŒØµ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Block Ø´Ø¯Ù‡**
```javascript
// ØªÙ„Ø§Ø´ Ø¨Ø±Ø§ÛŒ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ chat
await bot.getChat(chatId);
// Ø§Ú¯Ø± Ø®Ø·Ø§ Ø¨Ø§Ø´Ø¯ â†’ Ú©Ø§Ø±Ø¨Ø± block Ø´Ø¯Ù‡
```

### 2. **Ø¨Ø±Ø±Ø³ÛŒ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ØºÛŒØ±ÙØ¹Ø§Ù„**
```javascript
// Ø¨Ø±Ø±Ø³ÛŒ Ø¢Ø®Ø±ÛŒÙ† ÙØ¹Ø§Ù„ÛŒØª
const daysSinceLastActivity = (Date.now() - lastModified) / (1000 * 60 * 60 * 24);
return daysSinceLastActivity > INACTIVE_DAYS_THRESHOLD;
```

### 3. **Ø­Ø°Ù ÙØ§ÛŒÙ„ Database**
```javascript
// Ø­Ø°Ù ÙØ§ÛŒÙ„ JSON Ú©Ø§Ø±Ø¨Ø±
await fs.unlink(path.join(__dirname, '..', 'db', `${chatId}.json`));
```

## ğŸš€ **ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±**

Ø¯Ø± `bot.js`:
```javascript
const { startAutoCleanup } = require('./utils/autoCleanup');

// Ø´Ø±ÙˆØ¹ Ø³ÛŒØ³ØªÙ… cleanup
startAutoCleanup(bot);
```

## ğŸ”§ **Ø¯Ø³ØªÙˆØ± Admin Ø¯Ø³ØªÛŒ**

```javascript
/cleanup  // Ø§Ø¬Ø±Ø§ÛŒ Ø¯Ø³ØªÛŒ cleanup (ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ admin)
```

## ğŸ“Š **Log Ù†Ù…ÙˆÙ†Ù‡**

```
ğŸš€ Auto-cleanup started (30 days threshold, 24h interval)
ğŸ”„ Running automatic cleanup...
ğŸ“‹ Found 2 potentially blocked users
â° User 123456789 inactive for 30+ days
ğŸ—‘ï¸ Cleaned up inactive user data: 123456789
ğŸ—‘ï¸ Cleaned up inactive user data: 987654321
âœ… Cleanup completed: 2 user(s) cleaned
```

## ğŸ›¡ï¸ **Ø­ÙØ§Ø¸Øª Ø§Ø² Ø§Ø·Ù„Ø§Ø¹Ø§Øª**

- **ÙÙ‚Ø· Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙˆØ§Ù‚Ø¹Ø§Ù‹ ØºÛŒØ±ÙØ¹Ø§Ù„**: Ø¨ÛŒØ´ Ø§Ø² 30 Ø±ÙˆØ²
- **ØªØ´Ø®ÛŒØµ Ø¯Ù‚ÛŒÙ‚ Block**: ÙÙ‚Ø· Ø¯Ø± ØµÙˆØ±Øª Ø®Ø·Ø§ÛŒ Ù…Ø´Ø®Øµ
- **Log Ú©Ø§Ù…Ù„**: ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÛŒØ§Øª Ø«Ø¨Øª Ù…ÛŒâ€ŒØ´ÙˆØ¯
- **Admin Control**: Ø§Ù…Ú©Ø§Ù† cleanup Ø¯Ø³ØªÛŒ

## ğŸ“ **ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø·**

- `utils/autoCleanup.js` - Ù…Ù†Ø·Ù‚ Ø§ØµÙ„ÛŒ cleanup
- `bot.js` - ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø³ÛŒØ³ØªÙ…
- `test-cleanup.js` - ØªØ³Øª Ø³ÛŒØ³ØªÙ…
- `db/*.json` - ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ database Ú©Ø§Ø±Ø¨Ø±Ø§Ù†

---

**âœ¨ Ù†ØªÛŒØ¬Ù‡:** Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙˆÙ‚ØªÛŒ Ø±Ø¨Ø§Øª Ø±Ùˆ block/delete Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯ØŒ Ø§Ø·Ù„Ø§Ø¹Ø§ØªØ´ÙˆÙ† automatic Ù¾Ø§Ú© Ù…ÛŒâ€ŒØ´Ù‡! ğŸ‰